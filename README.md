# Проектная работа "Веб-ларек"
Проект является примером реализации маркетплейса для разработчиков, с возможностью просмотра, добавления в корзину и приобретения товаров с различной функциональностью.

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Документация

### Описание данных

Интерфейс **CardData** описывает данные о товаре, получаемые с помощью GET-запроса: id, description, image, title, category, price.

Интерфейс **UserData** отражает данные о покупателе, передаваемые при оформлении заказа, и отправляет их на сервер с помощью POST-запроса: payment, email, phone, address, total, items.

### Модели данных

*Базовые классы*

1. Класс **Api**
Представляет собой классическую реализацию класса, отвечающего за передачу данных на сервер. Конструктор в качестве аргументов принимает ссылку на данные *baseUrl* и опции передачи данных *options*. Содержит защищённый метод *handleResponse* - обработчик ответа от сервера и публичные методы *get* и *post* - для получения и отправки данных соответственно

2. Класс **EventEmitter**
Брокер событий: реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков
о наступлении события.
Класс содержит методы *on, off, emit*  — для подписки на событие, отписки от события и уведомления
подписчиков о наступлении события соответственно.
Дополнительно реализованы методы  *onAll и  offAll*  — для того, чтобы слушать все собития или сбросить все обработчики, а также метод *trigger*, генерирующий событие при вызове.

3. Класс **View**
Является абстрактным классом с дженериком, отвечает за отображение данных - инструментарий для работы с ДОМ в дочерних компонентах. Защищённый конструктор в качестве аргумента принимает контейнер с HTML-элементом. Содержит методы *toggleClass, setDisabled и render* - для переключения классов, смены статуса блокировки и возвращения корневого элемента, а также защищённые методы *setText, setHidden, setVisible, setImage* - для установления текстового содержимого, скрытия и показа элемента, а также для установления изображения с альтернативным текстом.

4. Класс **Model**
Представляет собой абстрактный класс, являющийся дженериком. Реализует хранение и изменение данных - базовая модель, чтобы можно было отличить ее от простых объектов с данными.Конструктор в качестве аргументов принимает данные c типом *Partial<T>* и защищённые события с интерфейсом *IEvents*.
Метод класса *emitChanges* сообщает об изменениях модели.

*Общие классы*

1. Класс **Modal**
Отвечает за отрисовку модальных окон с помощью класса *View* и интерфейса *IModalData*. В конструктор передаётся контейнер с HTML-элементом и защищённое свойство *events: IEvents*. Содержит методы *open, close, render* - для открытия, закрытия и отрисовки модального окна.

2. Класс **Form**
Получает тип в виде дженерика <T>, реализует отображение формы заполнения данных при заказе с помощью класса *View* и интерфейса *IFormState*. В качестве аргумента конструктор принимает защищённые свойства *container: HTMLFormElement* и *events: IEvents*. Содержит защищённый метод *onInputChange*, принимающий на вход поля формы и их значения, а также сеттеры *valid, errors* - для валидации форм и отображения ошибок ввода соответственно и метод *render*, выполняющий функцию отрисовки формы.

3. Класс **Basket**
Отвечает за отображения корзины с товарами. Конструктор принимает контейнер с HTMLElement и защищённое свойство *events* с передачей в качестве типа класс *EventEmitter*.Содержит сеттеры *items, selected, total* - для вывода массива товаров, активации кнопки оформления заказа и подсчёт итоговой суммы покупки.

4. Класс **Success**
Реализует отображение модального окна с успешно оформленным заказом. Конструктор в качестве аргумента принимает контейнер с HTML-элементом и действия с кнопкой данного модального окна, типизированные интерфейсом *ISuccessActions*. Метод класса *onClick()*, заимствованный у интерфейса, представляет собой слушатель клика по кнопке.

*Компоненты*

1. Класс **Card**
Является дженериком и отвечает за отображение карточки товара на главной странице с помощью класса *View<ICard<T>>*. Конструктор в качестве аргумента принимает *blockname* - защищённое свойство, отражающее наименование блока; контейнер HTML-элемента и опциональное свойство *actions?*. Содержит сеттеры данных карточки - *id, title, image, description* и геттеры для *id и title*.

2. Класс **Order**
Отвечает за отрисовку внесённых данных о заказе, реализуется с помощью класса *Form<IOrderForm>*. Конструктор состоит из контейнера с HTMLFormElement, а также события *events*.Содержит сеттеры *phone, email, address*, отображающие данные о получателе заказе.

3. Класс **Page**
Реализует отображение всех компонентов на главной странице приложения с помощью интерфейса *IPage*. Конструктор в качестве аргумента принимает контейнер и события. Содержит такие сеттеры, как *counter, catalog, locked* - счётчик элементов в корзине, отрисовка каталога и локер на прокрутку страницы во время открытого модального окна соответственно.

4. Класс **AppState**
Отвечает за реализацию модели данных приложения с помощью класса *Model* и интерфейса *IAppState*.
Содержит методы:
* clearBasket, очищающий корзину;
* getTotal, подсчитывающий итоговые суммы;
* setOrderField, отслеживающий заполнение формы;
* validateOrder, валидирующий форму